<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Card√°pio Digital - Doces da R√™</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&amp;family=Poppins:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #ffffff;
      color: #000000;
      min-height: 100%;
      overflow-x: hidden;
    }

    * {
      box-sizing: border-box;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, #f8cfd5 0%, #f2a1b8 100%);
      padding: 16px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    /* Regras do Logo */
    .store-logo {
        max-width: 120px; 
        height: auto;
        margin-bottom: 8px; 
        display: block; 
        margin-left: auto; 
        margin-right: auto; /* Centraliza o logo */
    }

    /* Novo estilo para o t√≠tulo principal do card√°pio */
    .main-cardapio-title {
        font-family: 'Dancing Script', cursive; /* Fonte elegante */
        font-size: 2.2em; /* Tamanho maior para chamar aten√ß√£o */
        color: #8a2e32; /* Cor de destaque (doce) */
        margin: 4px 0 0 0;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    .store-title, .store-slogan {
        /* Oculta os t√≠tulos antigos (Doces da R√™ e Slogan) */
        display: none; 
    }

    /* Navigation Tabs */
    .nav-tabs {
      display: flex;
      overflow-x: scroll; /* Permite rolagem horizontal no mobile */
      justify-content: flex-start;
      background-color: #ffffff;
      padding: 12px 8px;
      gap: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      position: sticky;
      top: 100px; /* Ajustado para dar espa√ßo ao Header */
      z-index: 99;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Media Query para centralizar e remover scroll no desktop */
    @media (min-width: 769px) {
        .nav-tabs {
            justify-content: center;
            overflow-x: hidden; 
        }
    }


    .nav-tabs::-webkit-scrollbar {
      height: 4px;
    }

    .nav-tabs::-webkit-scrollbar-thumb {
      background: #f2a1b8;
      border-radius: 2px;
    }

    .tab-button {
      flex-shrink: 0;
      padding: 10px 20px;
      border: 2px solid #f2a1b8;
      background-color: #ffffff;
      color: #8a2e32;
      border-radius: 25px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      font-size: 0.9em;
    }

    .tab-button:hover {
      background-color: #f8cfd5;
    }

    .tab-button.active {
      background-color: #8a2e32;
      color: #ffffff;
      border-color: #8a2e32;
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px 16px 100px;
    }

    .category-section {
      display: none;
    }

    .category-section.active {
      display: block;
    }

    .category-title {
      font-family: 'Dancing Script', cursive;
      font-size: 2em;
      color: #8a2e32;
      margin: 24px 0 20px;
      text-align: center;
    }

    /* Product Grid */
    .products-grid {
      display: grid;
      /* Padr√£o: 2 colunas no celular, 3 ou mais no desktop */
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
      gap: 20px;
      margin-top: 20px;
    }
    
    /* Responsividade do Grid */
    @media (min-width: 600px) {
        .products-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }
    }

    .product-card {
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid #f8cfd5;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(138,46,50,0.15);
    }

    .product-image {
      width: 100%;
      height: 180px;
      background: linear-gradient(135deg, #f8cfd5 0%, #f2a1b8 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4em;
      position: relative;
    }
    
    /* Ajuste de imagem e logo para mobile */
    @media (max-width: 768px) {
        .product-image {
            height: 150px;
            font-size: 3em;
        }
        
        .product-details {
            padding: 12px;
        }
        
        .store-logo {
            max-width: 100px; 
        }
        
        .main-cardapio-title {
            font-size: 1.8em;
        }
    }


    .product-details {
      padding: 16px;
    }

    .product-name {
      font-weight: 600;
      font-size: 1.1em;
      color: #8a2e32;
      margin: 0 0 8px 0;
    }
    
    /* Fonte menor no celular */
    @media (max-width: 600px) {
        .product-name {
            font-size: 1em;
        }
    }

    .product-description {
      font-size: 0.85em;
      color: #666;
      margin: 0 0 12px 0;
      line-height: 1.4;
    }

    .product-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .product-price {
      font-size: 1.3em;
      font-weight: 600;
      color: #8a2e32;
    }

    .add-button {
      background-color: #8a2e32;
      color: #ffffff;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease;
      font-size: 0.95em;
    }

    .add-button:hover {
      background-color: #6d2428;
    }

    /* Cart Float Button */
    .cart-float {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background-color: #8a2e32;
      color: #ffffff;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 16px rgba(138,46,50,0.4);
      cursor: pointer;
      transition: transform 0.3s ease;
      z-index: 1000;
    }
    
    /* Mobile - Ajusta bot√£o flutuante */
    @media (max-width: 600px) {
        .cart-float {
            width: 50px;
            height: 50px;
            bottom: 15px;
            right: 15px;
        }
        .cart-float span {
            font-size: 1.2em !important;
        }
        .cart-badge {
            width: 20px;
            height: 20px;
            font-size: 0.7em;
        }
    }


    .cart-float:hover {
      transform: scale(1.1);
    }

    .cart-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #f2a1b8;
      color: #000000;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75em;
      font-weight: 600;
    }

    /* Cart Panel */
    .cart-panel {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 400px;
      height: 100%;
      background-color: #ffffff;
      box-shadow: -4px 0 16px rgba(0,0,0,0.2);
      transition: right 0.3s ease;
      z-index: 1001;
      display: flex;
      flex-direction: column;
    }

    .cart-panel.open {
      right: 0;
    }
    
    /* For√ßa o painel a ocupar 100% da largura em telas muito pequenas */
    @media (max-width: 450px) {
        .cart-panel {
            max-width: 100%;
        }
    }

    .cart-header {
      background: linear-gradient(135deg, #f8cfd5 0%, #f2a1b8 100%);
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-title {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8em;
      color: #8a2e32;
      margin: 0;
    }

    .close-cart {
      background: none;
      border: none;
      font-size: 1.8em;
      cursor: pointer;
      color: #8a2e32;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .cart-item {
      background-color: #f8cfd5;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-name {
      font-weight: 600;
      color: #8a2e32;
      margin-bottom: 4px;
    }

    .cart-item-price {
      color: #666;
      font-size: 0.9em;
    }

    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .qty-button {
      background-color: #8a2e32;
      color: #ffffff;
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .qty-display {
      font-weight: 600;
      min-width: 24px;
      text-align: center;
    }

    .remove-item {
      background: none;
      border: none;
      color: #8a2e32;
      cursor: pointer;
      font-size: 1.2em;
      padding: 4px;
    }

    .cart-footer {
      padding: 20px;
      padding-bottom: 30px;
      border-top: 2px solid #f8cfd5;
      background-color: #ffffff;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      font-size: 1.3em;
      font-weight: 600;
      color: #8a2e32;
    }

    .checkout-button {
      background-color: #8a2e32;
      color: #ffffff;
      border: none;
      padding: 16px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      font-size: 1.1em;
      transition: background-color 0.3s ease;
    }

    .checkout-button:hover {
      background-color: #6d2428;
    }

    .checkout-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .empty-cart {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }

    /* Checkout Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1002;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-overlay.open {
      display: flex;
    }

    .modal-content {
      background-color: #ffffff;
      border-radius: 16px;
      padding: 24px;
      max-width: 500px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
    }

    .modal-title {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8em;
      color: #8a2e32;
      margin: 0 0 20px 0;
      text-align: center;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-weight: 500;
      margin-bottom: 6px;
      color: #8a2e32;
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: 12px;
      border: 2px solid #f8cfd5;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: #f2a1b8;
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .modal-button {
      flex: 1;
      padding: 14px;
      border: none;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s ease;
    }

    .modal-button.primary {
      background-color: #8a2e32;
      color: #ffffff;
    }

    .modal-button.primary:hover {
      background-color: #6d2428;
    }

    .modal-button.secondary {
      background-color: #f8cfd5;
      color: #8a2e32;
    }

    .modal-button.secondary:hover {
      background-color: #f2a1b8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .category-title {
        font-size: 1.6em;
      }

      .container {
        padding: 10px 10px 80px; /* Reduz o padding lateral e inferior */
      }

      .cart-panel {
        max-width: 100%;
      }

      .nav-tabs {
        top: 100px;
        padding: 8px 10px; /* Ajusta padding da aba */
      }
      
      .tab-button {
          padding: 8px 16px; /* Ajusta padding do bot√£o da aba */
          font-size: 0.85em;
      }
      
      .header {
        padding: 10px; /* Ajusta padding do header no mobile */
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <header class="header">
    <img src="img/logo.jpg" alt="Logo Doces da R√™" class="store-logo"> 
    
    <h1 class="main-cardapio-title">Nosso Card√°pio</h1>
    </header>
  <nav class="nav-tabs" id="navTabs"><button class="tab-button active" data-category="mimos">Mimos</button> <button class="tab-button" data-category="biscoitos">Biscoitos</button> <button class="tab-button" data-category="sobremesas">Sobremesas</button> <button class="tab-button" data-category="tacas">Ta√ßas e Tortas</button> <button class="tab-button" data-category="salgadas">Tortas Salgadas</button>
  </nav>
  <div class="container"><section class="category-section active" id="mimos">
    <h2 class="category-title">üéÅ Mimos - Presente em Forma de Doce</h2>
    <div class="products-grid">
     <div class="product-card">
      <div class="product-image">
        üç™
      </div>
      <div class="product-details">
       <h3 class="product-name">P√£o de Mel Mini Redondo</h3>
       <p class="product-description">Delicioso p√£o de mel em formato mini</p>
       <div class="product-info"><span class="product-price">R$ 5,50</span>
       </div><button class="add-button" onclick="addToCart('P√£o de Mel Mini Redondo', 5.50)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üéÑ
      </div>
      <div class="product-details">
       <h3 class="product-name">P√£o de Mel √Årvore de Natal</h3>
       <p class="product-description">Formato especial de Natal</p>
       <div class="product-info"><span class="product-price">R$ 9,50</span>
       </div><button class="add-button" onclick="addToCart('P√£o de Mel √Årvore de Natal', 9.50)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üéÅ
      </div>
      <div class="product-details">
       <h3 class="product-name">P√£o de Mel Caixinha de Presente</h3>
       <p class="product-description">Formato de presente natalino</p>
       <div class="product-info"><span class="product-price">R$ 9,50</span>
       </div><button class="add-button" onclick="addToCart('P√£o de Mel Caixinha de Presente', 9.50)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üì¶
      </div>
      <div class="product-details">
       <h3 class="product-name">Caixa de P√£o de Mel</h3>
       <p class="product-description">1 √Årvore + 2 Presentes ‚Ä¢ Acompanha sacola kraft</p>
       <div class="product-info"><span class="product-price">R$ 32,00</span>
       </div><button class="add-button" onclick="addToCart('Caixa de P√£o de Mel', 32.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
    </div>
   </section><section class="category-section" id="biscoitos">
    <h2 class="category-title">üç™ Biscoitos</h2>
    <div class="products-grid">
     <div class="product-card">
      <div class="product-image">
        ‚≠ê
      </div>
      <div class="product-details">
       <h3 class="product-name">Biscoito Amanteigado Natalino</h3>
       <p class="product-description">Formato Natalino ‚Ä¢ Inclui TAG de Natal + saquinho transparente</p>
       <div class="product-info"><span class="product-price">R$ 3,80</span>
       </div><button class="add-button" onclick="addToCart('Biscoito Amanteigado Natalino', 3.80)">Adicionar ao Carrinho</button>
      </div>
     </div>
    </div>
   </section><section class="category-section" id="sobremesas">
    <h2 class="category-title">üç∞ Sobremesas</h2>
    <div class="products-grid">
     <div class="product-card">
      <div class="product-image">
        üçá
      </div>
      <div class="product-details">
       <h3 class="product-name">Bombom de Uva</h3>
       <p class="product-description">Aprox. 1.300 kg ‚Ä¢ Serve 8 a 10 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 119,00</span>
       </div><button class="add-button" onclick="addToCart('Bombom de Uva', 119.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üçì
      </div>
      <div class="product-details">
       <h3 class="product-name">Bombom de Morango</h3>
       <p class="product-description">Aprox. 1.300 kg ‚Ä¢ Serve 8 a 10 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 129,00</span>
       </div><button class="add-button" onclick="addToCart('Bombom de Morango', 129.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üçç
      </div>
      <div class="product-details">
       <h3 class="product-name">Surpresa de Abacaxi</h3>
       <p class="product-description">Aprox. 1.300 kg ‚Ä¢ Serve 8 a 10 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 98,00</span>
       </div><button class="add-button" onclick="addToCart('Surpresa de Abacaxi', 98.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
    </div>
   </section><section class="category-section" id="tacas">
    <h2 class="category-title">üç® Ta√ßas e Tortas Supreme</h2>
    <div class="products-grid">
     <div class="product-card">
      <div class="product-image">
        üçì
      </div>
      <div class="product-details">
       <h3 class="product-name">Ta√ßa Supreme de Brownie - Morango</h3>
       <p class="product-description">Aprox. 1.300 kg ‚Ä¢ Serve at√© 10 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 129,00</span>
       </div><button class="add-button" onclick="addToCart('Ta√ßa Supreme de Brownie - Morango', 129.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        ü•≠
      </div>
      <div class="product-details">
       <h3 class="product-name">Ta√ßa Supreme de Brownie - Maracuj√°</h3>
       <p class="product-description">Aprox. 1.300 kg ‚Ä¢ Serve at√© 10 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 129,00</span>
       </div><button class="add-button" onclick="addToCart('Ta√ßa Supreme de Brownie - Maracuj√°', 129.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üçå
      </div>
      <div class="product-details">
       <h3 class="product-name">Torta Banoffe</h3>
       <p class="product-description">Aprox. 1.500 kg ‚Ä¢ Serve 10 a 12 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 102,00</span>
       </div><button class="add-button" onclick="addToCart('Torta Banoffe', 102.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üç´
      </div>
      <div class="product-details">
       <h3 class="product-name">Torta Holandesa</h3>
       <p class="product-description">Aprox. 1.600 kg ‚Ä¢ Serve 10 a 12 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 124,00</span>
       </div><button class="add-button" onclick="addToCart('Torta Holandesa', 124.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üçã
      </div>
      <div class="product-details">
       <h3 class="product-name">Torta de Lim√£o</h3>
       <p class="product-description">Aprox. 1.500 kg ‚Ä¢ Serve 10 a 12 pessoas</p>
       <div class="product-info"><span class="product-price">R$ 98,00</span>
       </div><button class="add-button" onclick="addToCart('Torta de Lim√£o', 98.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
    </div>
   </section><section class="category-section" id="salgadas">
    <h2 class="category-title">ü•ß Tortas Salgadas</h2>
    <div class="products-grid">
     <div class="product-card">
      <div class="product-image">
        üçó
      </div>
      <div class="product-details">
       <h3 class="product-name">Torta Salgada de Frango</h3>
       <p class="product-description">Aprox. 1.300 kg</p>
       <div class="product-info"><span class="product-price">R$ 96,00</span>
       </div><button class="add-button" onclick="addToCart('Torta Salgada de Frango', 96.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
     <div class="product-card">
      <div class="product-image">
        üå¥
      </div>
      <div class="product-details">
       <h3 class="product-name">Torta Salgada de Palmito</h3>
       <p class="product-description">Aprox. 1.300 kg</p>
       <div class="product-info"><span class="product-price">R$ 104,00</span>
       </div><button class="add-button" onclick="addToCart('Torta Salgada de Palmito', 104.00)">Adicionar ao Carrinho</button>
      </div>
     </div>
    </div>
   </section>
  </div><div class="cart-float" id="cartFloat" onclick="toggleCart()"><span style="font-size: 1.5em;">üõí</span> <span class="cart-badge" id="cartBadge">0</span>
  </div><div class="cart-panel" id="cartPanel">
   <div class="cart-header">
    <h2 class="cart-title">Meu Carrinho</h2><button class="close-cart" onclick="toggleCart()">√ó</button>
   </div>
   <div class="cart-items" id="cartItems">
    <div class="empty-cart">
     <p>Seu carrinho est√° vazio</p>
     <p style="font-size: 3em; margin: 20px 0;">üõí</p>
    </div>
   </div>
   <div class="cart-footer">
    <div class="cart-total"><span>Total:</span> <span id="cartTotal">R$ 0,00</span>
    </div><button class="checkout-button" id="checkoutButton" onclick="openCheckout()" disabled>Finalizar Pedido</button>
   </div>
  </div><div class="modal-overlay" id="checkoutModal">
   <div class="modal-content">
    <h2 class="modal-title">Finalizar Pedido</h2>
    <form id="checkoutForm" onsubmit="submitOrder(event)">
     <div class="form-group"><label class="form-label" for="paymentMethod">Forma de Pagamento *</label> <select id="paymentMethod" class="form-select" required> <option value="">Selecione...</option> <option value="Dinheiro">üíµ Dinheiro</option> <option value="PIX">üì± PIX</option> <option value="Debito">üí≥ Cart√£o de D√©bito</option> <option value="Credito">üí≥ Cart√£o de Cr√©dito</option> </select>
     </div>
     <div class="modal-buttons"><button type="button" class="modal-button secondary" onclick="closeCheckout()">Cancelar</button> <button type="submit" class="modal-button primary">Enviar pelo WhatsApp</button>
     </div>
    </form>
   </div>
  </div>
  <script>
    const defaultConfig = {
      store_name: "Doces da R√™",
      whatsapp_number: "5519982935071",
      category_1: "Mimos",
      category_2: "Biscoitos",
      category_3: "Sobremesas",
      category_4: "Ta√ßas e Tortas",
      category_5: "Tortas Salgadas"
    };

    let cart = [];

    // Navigation
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        const category = button.dataset.category;
        
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        
        document.querySelectorAll('.category-section').forEach(section => section.classList.remove('active'));
        document.getElementById(category).classList.add('active');
      });
    });

    // Cart Functions
    function addToCart(name, price) {
      const existingItem = cart.find(item => item.name === name);
      
      if (existingItem) {
        existingItem.quantity++;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      
      updateCart();
    }

    function updateQuantity(index, change) {
      cart[index].quantity += change;
      
      if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
      }
      
      updateCart();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCart();
    }

    function updateCart() {
      const cartBadge = document.getElementById('cartBadge');
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      const checkoutButton = document.getElementById('checkoutButton');
      
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      
      cartBadge.textContent = totalItems;
      cartTotal.textContent = `R$ ${totalPrice.toFixed(2).replace('.', ',')}`;
      
      if (cart.length === 0) {
        cartItems.innerHTML = `
          <div class="empty-cart">
            <p>Seu carrinho est√° vazio</p>
            <p style="font-size: 3em; margin: 20px 0;">üõí</p>
          </div>
        `;
        checkoutButton.disabled = true;
      } else {
        cartItems.innerHTML = cart.map((item, index) => `
          <div class="cart-item">
            <div class="cart-item-info">
              <div class="cart-item-name">${item.name}</div>
              <div class="cart-item-price">R$ ${item.price.toFixed(2).replace('.', ',')}</div>
            </div>
            <div class="cart-item-controls">
              <button class="qty-button" onclick="updateQuantity(${index}, -1)">‚àí</button>
              <span class="qty-display">${item.quantity}</span>
              <button class="qty-button" onclick="updateQuantity(${index}, 1)">+</button>
              <button class="remove-item" onclick="removeItem(${index})">üóëÔ∏è</button>
            </div>
          </div>
        `).join('');
        checkoutButton.disabled = false;
      }
    }

    function toggleCart() {
      const cartPanel = document.getElementById('cartPanel');
      cartPanel.classList.toggle('open');
    }

    function openCheckout() {
      document.getElementById('checkoutModal').classList.add('open');
    }

    function closeCheckout() {
      document.getElementById('checkoutModal').classList.remove('open');
    }

    // Fun√ß√£o para enviar o pedido via WhatsApp
    function submitOrder(event) {
        event.preventDefault();
        
        const payment = document.getElementById('paymentMethod').value;
        
        const messageParts = [];
        messageParts.push('Ola, gostaria de fazer um pedido:');
        messageParts.push('');
        messageParts.push('PEDIDO:');
        
        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            const formattedTotal = itemTotal.toFixed(2).replace('.', ',');
            messageParts.push(item.quantity + 'x ' + item.name + ' - R$ ' + formattedTotal);
        });
        
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const formattedTotal = total.toFixed(2).replace('.', ',');
        
        messageParts.push('');
        messageParts.push('TOTAL: R$ ' + formattedTotal);
        messageParts.push('');
        messageParts.push('Forma de Pagamento: ' + payment);
        
        const rawMessage = messageParts.join('\n'); 
        const encodedMessage = encodeURIComponent(rawMessage); 
        
        let whatsappNumber = defaultConfig.whatsapp_number;
        if (window.elementSdk && window.elementSdk.config && window.elementSdk.config.whatsapp_number) {
            whatsappNumber = window.elementSdk.config.whatsapp_number;
        }
        
        const cleanNumber = whatsappNumber.replace(/\D/g, '');
        
        const whatsappUrl = 'https://wa.me/' + cleanNumber + '?text=' + encodedMessage;
        
        window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
        
        // Limpa o carrinho ap√≥s o envio
        cart = [];
        updateCart();
        closeCheckout();
        toggleCart();
        
        document.getElementById('checkoutForm').reset();
    }

    // Configura√ß√µes do SDK (Manter inalteradas)
    async function onConfigChange(config) {
        const storeNameElement = document.getElementById('storeName');
        const tabButtons = document.querySelectorAll('.tab-button');
        
        // Ocultado o nome da loja, mas mantido o placeholder no SDK
        // storeNameElement.textContent = config.store_name || defaultConfig.store_name; 
        
        const categories = [
            config.category_1 || defaultConfig.category_1,
            config.category_2 || defaultConfig.category_2,
            config.category_3 || defaultConfig.category_3,
            config.category_4 || defaultConfig.category_4,
            config.category_5 || defaultConfig.category_5
        ];
        
        tabButtons.forEach((button, index) => {
            button.textContent = categories[index];
        });
    }

    if (window.elementSdk) {
        window.elementSdk.init({
            defaultConfig,
            onConfigChange,
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["store_name", config.store_name || defaultConfig.store_name],
                ["whatsapp_number", config.whatsapp_number || defaultConfig.whatsapp_number],
                ["category_1", config.category_1 || defaultConfig.category_1],
                ["category_2", config.category_2 || defaultConfig.category_2],
                ["category_3", config.category_3 || defaultConfig.category_3],
                ["category_4", config.category_4 || defaultConfig.category_4],
                ["category_5", config.category_5 || defaultConfig.category_5]
            ])
        });
    }

    onConfigChange(defaultConfig);
  </script>
  <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a2a5cbf139f1b33',t:'MTc2MzgzNDgwMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
